* Install/configure support for Go

#+BEGIN_SRC emacs-lisp

  (use-package go-mode
    :config
    (defun my-go-before-save-hook ()
      (when (eq major-mode 'go-mode) (lsp-format-buffer))
    )
    (defun my-go-after-save-hook ()
      (when (eq major-mode 'go-mode)
        (if (string= (buffer-name) "main.go")
          (go-run)
          (go-test-current-project)
        )
      )
    )
    (add-hook 'before-save-hook #'my-go-before-save-hook)
    (add-hook 'after-save-hook #'my-go-after-save-hook)
  )

  (use-package lsp-mode
    :config
    (add-hook 'go-mode-hook 'lsp-deferred)
    (use-package lsp-ui)
    (use-package flycheck)
    (use-package company-lsp)
  )

  (use-package gotest)

#+END_SRC
